{% extends "base.html" %} 
{% load static %} 
{% load book_filter %} 

{% block title %} 
  {{book.title}} 
{% endblock title %} 

{% block content %}
<div class="book-image">
  <img id="bg-img" src="{{book.cover.url}}" />
  <img id="preview-img" src="{{book.cover.url}}" />
  <br />
</div>
<div class="info-container">
  <div id="info">
    <h5>Author</h5>
    <ul id="author">
      {% for author in book.authors.all %}
      <li id="{{author.id}}">
        <a href="{% url 'search' %}?search={{author.name}}&searchBy=author"
          >{{author.name}}</a
        >
      </li>
      {% endfor %}
    </ul>
    <h5>Type</h5>
    <div>
      <ul id="types">
        {{book.book_type}}
      </ul>
    </div>
    <h5>Genres</h5>
    <ul id="categories">
      {% for genre in book.genres.all %}
      <li id="{{genre.id}}">
        <a href="{% url 'search' %}?search={{genre.name}}&searchBy=genre"
          >{{genre.name}}</a
        >
      </li>
      {% endfor %}
    </ul>
    <h5>Language</h5>
    <div>
      <ul id="language">
        {{book.language|get_human_readable_language}}
      </ul>
    </div>
  </div>
  <div id="name-description-container">
    <div class="text">
      <h1 id="book-name">{{book.title}}</h1>
      <p id="book-description" class="{{book.language}}-lang">{{book.desc}}</p>
      {% if user.is_authenticated and book.is_available %}
      <button class="Borrow" type="button" id="borrow-btn">Borrow</button>
      {% elif not book.is_available %}
      <button class="Borrow" type="button" id="borrow-btn" style="background-color: red">
        Out of stock
      </button>
      {% endif %}
    </div>
  </div>
</div>
{% endblock content %}

{% block script %}
  <script>
    let book_desc = document.getElementById('book-description');
    book_desc.innerHTML = book_desc.innerHTML.replaceAll('\n', '<br>');
  </script>
{% endblock script %}