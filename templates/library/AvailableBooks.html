{% extends "base.html" %} {% load static %} {% load book_filter %} 

{% block title %} Available Books {%endblock title %} 


{% block content %}
<h2 id="available-header">Available Books</h2>
<div class="books-section" id="available-books-section">
  {% for book in books %}
  <div class="book">
    <a href="{{book.get_absolute_url}}"><img src="{{book.cover.url}}" alt="{{book.title}}" /></a>
    <h5 class="name">{{book.title}}</h5>
    {% if user.is_authenticated and book.is_available %} 
      {% if book.id in borrow_records %}
        <button
          class="Borrowed"
          type="button"
          onclick="return_book(event,{{ borrow_records|get_item_from_dict:book.id }})"
        >
          Return
        </button>
      {% else %}
        <button class="Borrow" type="button" onclick="borrow(event,{{book.id}})">
          Borrow
        </button>
      {% endif %}
    {% elif not book.is_available %}
    <button class="Borrow" type="button" style="background-color: red">
      Out of stock
    </button>
    {% endif %}
    <a class="previewButton" href="{{book.get_absolute_url}}">Details</a>
  </div>
  {% endfor %}
</div>

{% endblock content %}
